---
layout: post
title: Facebook API from Java code
date: '2011-02-26T09:35:00.001+05:30'
author: Neil Ghosh
tags:
- Algorithms
- App
- JSON
- Facebook
- API
- java
modified_time: '2014-10-11T20:22:13.234+05:30'
blogger_id: tag:blogger.com,1999:blog-6081677503074893817.post-8497275597302489567
blogger_orig_url: https://www.neilghosh.com/2011/02/facebook-api-from-java-code_26.html
---

I just got started with<a href="http://developers.facebook.com/docs/reference/api/" target="_blank"> Facebook (graph)  API </a> and fetch data from native Java programs for my project requirements .First of all I created an sample app at <a href="http://www.facebook.com/developers/apps.php" target="_blank">http://developers.facebook.com/</a> and got the necessary details about the app at the summery.<br/><br/><a href="http://neilghosh.com/blog/wp-content/uploads/2011/05/fb_app12.png"><img class="aligncenter size-full wp-image-538" title="Facebook Application" src="http://neilghosh.com/blog/wp-content/uploads/2011/05/fb_app12.png" alt="" width="615" height="547" /></a><br/><br/>Once I registered the app it was time to give permission from my user account to the app so that it can access ( so the API ) data from my account.<br/><pre>https://www.facebook.com/dialog/oauth?<br/>     client_id=MY_APP_ID&amp;redirect_uri=MY_URL</pre><br/>MY_URL was any random url as the landing page after I log in was immaterial in this case as I was going to use the APIs from the java code.<br/><pre>https://www.facebook.com/dialog/oauth?<br/>     client_id=YOUR_APP_ID&amp;redirect_uri=YOUR_URL&amp;scope=email,read_str,offline_access<br/></pre><br/>I addded <strong>offline_access</strong> so that it does not time out , I can use the access token generated forever.<br/>Now after I allowed access it landed on a page similar to the following<br/><pre>http://YOUR_URL?code=A_CODE_GENERATED_BY_SERVER<br/></pre><br/>To get the access_token I invoked following<br/><pre>https://graph.facebook.com/oauth/access_token?<br/> client_id=&lt;MY_APP_ID&gt;&amp;redirect_uri=YOUR_URL&amp;<br/> client_secret=YOUR_APP_SECRET&amp;code=THE_CODE_FROM_ABOVE<br/></pre><br/>once the access token appeared in the response I invoked various graph APIs to test if data is coming in JSON format<br/><br/>https://graph.facebook.com/me?access_token=&lt;Access_token_obtained_from_last_step&gt;<br/>gives me all my wall posts<br/><br/>https://graph.facebook.com/&lt;POST_ID&gt;?access_token=&lt;Access_token_obtained_from_last_step&gt;<strong><br/></strong>gives me all the comments for a given post id of mine<br/><br/>I also used <a href="http://code.google.com/p/json-simple/" target="_blank">json-simple</a> to parse and decode the JSON returned by the above Facebook APIs.<br/><pre>/*<code><span><span style="color:#000000;">FindComments.java</span></span></code>*/<br/><br/><code><span style="color:#000000;">import java.io.BufferedReader;</span><br/></code><br/><br/>import java.io.IOException;<br/><br/>import java.io.InputStreamReader;<br/><br/>import java.net.MalformedURLException;<br/><br/>import java.net.URL;<br/><br/>import java.net.URLConnection;<br/><br/>import org.json.simple.JSONArray;<br/><br/>import org.json.simple.JSONObject;<br/><br/>import org.json.simple.JSONValue;<br/><br/>public class FindComments {<br/>/**<br/><br/>* @param args<br/><br/>* @throws IOException<br/><br/>*/<br/><br/>public static void main(String[] args) throws IOException {<br/>String commentID = "&lt;COMMEN_ID&gt;";<br/><br/>String accessToken = "&lt;ACCESS_TOKEN&gt;";<br/>// TODO Auto-generated method stub<br/><br/>URL yahoo = new URL(<br/><br/>"https://graph.facebook.com/"+commentID+"?access_token="+accessToken);<br/><br/>URLConnection yc = yahoo.openConnection();<br/><br/>BufferedReader in = new BufferedReader(new InputStreamReader(yc<br/><br/>.getInputStream()));<br/><br/>String inputLine;<br/><br/>String s = "";<br/><br/>while ((inputLine = in.readLine()) != null)<br/><br/>// System.out.println(inputLine);<br/><br/>s = s + inputLine + "n";<br/><br/>in.close();<br/>// System.out.println(s);<br/>Object obj = JSONValue.parse(s);<br/><br/>// JSONArray array=(JSONArray)obj;<br/><br/>// System.out.println(obj);<br/><br/>// System.out.println(array.get(1));<br/><br/>JSONObject obj2 = (JSONObject) obj;<br/>JSONObject comments = (JSONObject) obj2.get("comments");<br/><br/>JSONArray commentsArray = (JSONArray) comments.get("data");<br/><br/>// System.out.println(commentsArray.size());<br/><br/>// System.out.println(obj2.get("comments"));<br/><br/>for (int i = 0; i &amp;lt; commentsArray.size(); i++) {<br/><br/>JSONObject commentobj = (JSONObject) commentsArray.get(i);<br/><br/>// System.out.println(commentobj);<br/><br/>String commentText = (String) commentobj.get("message");<br/><br/>System.out.println(commentText);<br/><br/>}<br/>}<br/><br/>}<br/></pre><br/>The above code prints the comments given on the Hard coded post ID